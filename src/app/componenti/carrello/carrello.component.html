<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab-Air</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    
</head>

<header>

<!-- INIZIO FINESTRA DI RICERCA INPUT -->

 <app-search
    [searchTerm]="searchTerm"
    [suggestions]="allSuggestions"
    (searchTermChange)="onSearchTermChange($event)"
  ></app-search>

<!-- FINE FINESTRA DI RICERCA INPUT -->

<!-- INIZIO SCROLLBAR PUBBLICITARIA-->
<div class="scrollbar-container">
  <div class="scrollbar-wrapper">
   
    <div class="scrolling-text">
      <span *ngFor="let phrase of phrases">{{ phrase }} &nbsp;•&nbsp; </span>
    </div>
   
  </div>
</div>
<!-- FINE SCROLLBAR PUBBLICITARIA-->
</header>

<body>
  <div class="cart-container">
    <!-- Header del carrello -->
    <div class="cart-header">
      <h1 class="cart-title">Carrello</h1>
      <div class="cart-count" *ngIf="cart.length > 0">
        {{ cart.length }} {{ cart.length === 1 ? 'articolo' : 'articoli' }}
      </div>
    </div>

    <!-- Contenuto principale -->
    <div class="cart-content" *ngIf="cart.length > 0">
      <!-- Lista prodotti -->
      <div class="cart-items">
        <div class="cart-item" *ngFor="let product of cart; let i = index">
          <div class="item-image">
            <img [src]="product.image || product.src" [alt]="product.name" />
          </div>
          
          <div class="quantity-selector">
            <div class="quantity-controls">
              <button class="qty-btn" (click)="decreaseQuantity(i)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" *ngIf="(product.quantity || 1) > 1">
                  <path d="M19 13H5v-2h14v2z"/>
                </svg>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" *ngIf="(product.quantity || 1) === 1">
                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                </svg>
              </button>
              <span class="qty-display">{{ product.quantity || 1 }}</span>
              <button class="qty-btn" (click)="increaseQuantity(i)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
              </button>
            </div>
          </div>
          
          <div class="favorites-icon">
            <button class="qty-btn favorites-btn" [class.active]="product.isFavorite" (click)="toggleFavorite(i)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" *ngIf="product.isFavorite">
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
              </svg>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" *ngIf="!product.isFavorite">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
              </svg>
            </button>
          </div>
          
          <div class="item-details">
            <div class="item-info">
              <h3 class="item-name">{{ product.name }}</h3>
              <div class="item-variants">
                <span class="variant">Taglia: {{ product.size }}</span>
                <span class="variant">Colore: {{ product.color }}</span>
              </div>
            </div>
          </div>
          
          <div class="item-total">
            €{{ (product.price * (product.quantity || 1)).toFixed(2) }}
          </div>
        </div>
      </div>
      
      <!-- Riepilogo ordine -->
      <div class="order-summary">
        <div class="summary-card">
          <h2 class="summary-title">Riepilogo</h2>
          
          <div class="summary-row">
            <span>Subtotale</span>
            <span>€{{ getTotal() }}</span>
          </div>
          
          <div class="summary-row">
            <span>Spedizione</span>
            <span class="free-shipping">Gratuita</span>
          </div>
          
          <div class="summary-divider"></div>
          
          <div class="summary-row total-row">
            <span class="total-label">Totale</span>
            <span class="total-amount">€{{ getTotal() }}</span>
          </div>
          
          <button class="checkout-btn" (click)="procediAlPagamento()">
            <span>Procedi al checkout</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
            </svg>
          </button>
          
          <button class="paypal-btn" (click)="procediConPayPal()">
            PayPal
          </button>
          
        
        </div>
      </div>
    </div>
    
    <!-- Carrello vuoto -->
    <div class="empty-cart" *ngIf="cart.length === 0">
      <div class="empty-cart-icon">
        <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z"/>
        </svg>
      </div>
      <h2 class="empty-title">Il tuo carrello è vuoto</h2>
      <p class="empty-description">Aggiungi alcuni prodotti per iniziare lo shopping</p>
      <button class="continue-shopping-btn" (click)="continueShopping()">
        Continua lo shopping
      </button>
    </div>
  </div>

</body>
<!-- scrollbar di prodotti -->
<div class="gallery-container">
  <div class="gallery-header">
    <h2>Potrebbe Piacerti Anche</h2>
   <div id="button-group">
    <button class="arrow-btn" (click)="scrollLeft()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
      </svg>
    </button>
    <button class="arrow-btn" (click)="scrollRight()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
      </svg>
    </button>
   </div>
  </div>

  <div class="image-scroll" #scrollContainer (scroll)="onScroll()">
    <div class="image-wrapper" *ngFor="let item of images">
      <img [src]="item.src" [alt]="item.alt" (click)="onBuyGalleryItem(item)" />
      <p class="product-name" (click)="onBuyGalleryItem(item)">{{ item.name }}</p>
    </div>
  </div>

  <div class="progress-bar">
    <div class="progress-fill" [style.width.%]="progress"></div>
    <button class="progress-arrow-left" (click)="scrollLeft()" title="Scorri a sinistra"></button>
    <button class="progress-arrow-right" (click)="scrollRight()" title="Scorri a destra"></button>
  </div>
</div>
   
<br><br>

<!-- Footer -->
<app-footer></app-footer>



